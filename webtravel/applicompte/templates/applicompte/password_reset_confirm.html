{% extends 'applitravel/base.html' %}
{% block title %}Renouvellement du mot de passe{% endblock %}

{% block main %}

<div class="container py-5" style="max-width: 600px;">

    {% if validlink %}

    <!-- Titre -->
    <div class="text-center mb-4 animate-fade">
        <h2 class="fw-bold text-primary-light">Nouveau mot de passe</h2>
        <p class="opacity-75">
            Veuillez saisir deux fois votre nouveau mot de passe.
        </p>
    </div>

    <!-- Card -->
    <div class="card-neo p-4 p-lg-5 animate-fade">

        <form id="form_password_reset" method="post">
            {% csrf_token %}

            <!-- Nouveau mot de passe -->
            <div class="mb-4">
                <label for="id_new_password1" class="form-label fw-semibold">Nouveau mot de passe</label>
                <input type="password"
                       name="new_password1"
                       class="form-control"
                       maxlength="80"
                       required
                       id="id_new_password1"
                       placeholder="Votre nouveau mot de passe">
            </div>

            <!-- Confirmation -->
            <div class="mb-4">
                <label for="id_new_password2" class="form-label fw-semibold">Confirmer le mot de passe</label>
                <input type="password"
                       name="new_password2"
                       class="form-control"
                       maxlength="80"
                       required
                       id="id_new_password2"
                       placeholder="Confirmez votre mot de passe">
            </div>

            <!-- Bouton -->
            <button type="submit" class="btn btn-neo-primary w-100 py-2 fw-bold">
                Changer le mot de passe
            </button>

        </form>

    </div>

    {% else %}

    <!-- Lien invalide -->
    <div class="card-neo text-center p-5 animate-fade">

        <div class="mb-4">
            <i class="bi bi-x-circle-fill"
               style="font-size: 3rem; color: var(--accent);"></i>
        </div>

        <h2 class="fw-bold text-primary-light mb-3">
            Lien invalide
        </h2>

        <p class="opacity-75 mb-4">
            Le lien de réinitialisation est expiré ou incorrect.<br>
            Veuillez recommencer la procédure.
        </p>

        <a href="/password_reset/" class="btn btn-neo-primary px-4 py-2 fw-bold">
            Demander un nouveau lien
        </a>

    </div>

    {% endif %}

</div>

{% endblock %}
